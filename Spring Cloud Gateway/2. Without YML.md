ржжрж╛рж░рзБржг ржкрзНрж░рж╢рзНржи ЁЯСМ тАФ ржПржЯрж╛ ржирж╛ ржмрзБржЭрж▓рзЗ **Gateway ржкрзБрж░рзЛ magic ржоржирзЗ рж╣рзЯ**ред
ржЪрж▓ ржПржХржжржо ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж┐ ЁЯСЗ

---

## тЭУ ржкрзНрж░рж╢рзНржиржЯрж╛ рж╕ржВржХрзНрж╖рзЗржкрзЗ

> **Spring Cloud Gateway-ржП route / filter рж╕ржм YML-ржП рж▓рзЗржЦрж╛ ржерж╛ржХрзЗ тАФ рждрж╛рж╣рж▓рзЗ ржХрж┐ YML ржирж┐ржЬрзЗржЗ run рж╣рзЯ?**

ЁЯСЙ **ржирж╛ред YML ржХржЦржирзЛ run рж╣рзЯ ржирж╛ред**
ЁЯСЙ **Java code run рж╣рзЯред**
ЁЯСЙ **YML рж╢рзБржзрзБ configuration / instruction ржжрзЗрзЯред**

---

## ЁЯза ржЖрж╕рж▓рзЗ ржХрзА рж╣рзЯ (Inside the Engine)

```
JVM start
 тЖУ
Spring Boot Application run()
 тЖУ
Spring reads application.yml
 тЖУ
Spring Cloud Gateway parses routes
 тЖУ
Gateway creates Route objects
 тЖУ
Gateway engine starts listening (Netty)
```

---

## ЁЯФ╣ YML ржПрж░ ржнрзВржорж┐ржХрж╛ ржХрзА?

YML рж╣рж▓рзЛ **instruction file** ЁЯУЬ
ржорж╛ржирзЗ:

* ржХрзЛржи path ржпрж╛ржмрзЗ ржХрзЛржерж╛рзЯ
* ржХрзЛржи filter рж▓рж╛ржЧржмрзЗ
* ржХрзЛржи predicate match ржХрж░ржмрзЗ

YML = **Rules**
Java = **Engine**

---

## ЁЯзй Simple Analogy (Real-life)

* ЁЯЧ║я╕П Google Map тЖТ YML
* ЁЯЪЧ Car Engine тЖТ Java (Spring Boot)

Map ржирж┐ржЬрзЗ ржЪрж▓рзЗ ржирж╛
Engine map ржкрзЬрзЗ ржЪрж▓рзЗ ЁЯШД

---

## ЁЯФН Gateway Example Breakdown

### application.yml

```yaml
spring:
  cloud:
    gateway:
      routes:
        - id: user-service
          uri: lb://USER-SERVICE
          predicates:
            - Path=/api/users/**
```

### Runtime-ржП ржХрзА рж╣рзЯ?

* Spring Boot YML ржкрзЬрзЗ
* `RouteDefinition` object ржмрж╛ржирж╛рзЯ
* Gateway handler-ржП register ржХрж░рзЗ
* Request ржЖрж╕рж▓рзЗ Java code match ржХрж░рзЗ

---

## тЪЩя╕П ржХрзЗ YML ржкрзЬрзЗ?

Spring Boot internally:

* `YamlPropertySourceLoader`
* `GatewayAutoConfiguration`
* `RouteDefinitionLocator`

ЁЯСЙ ржПржЧрзБрж▓рзЛ рж╕ржм **Java classes**

---

## тЭМ YML ржЫрж╛рзЬрж╛ ржХрж┐ Gateway ржЪрж▓рзЗ?

тЬФя╕П рж╣рзНржпрж╛ржБ

Pure Java config ржжрж┐рзЯрзЗржУ route рж▓рзЗржЦрж╛ ржпрж╛рзЯ:

```java
@Bean
public RouteLocator routes(RouteLocatorBuilder builder) {
    return builder.routes()
        .route("user-service",
            r -> r.path("/api/users/**")
                  .uri("lb://USER-SERVICE"))
        .build();
}
```

---

## ЁЯФД рждрж╛рж╣рж▓рзЗ ржХрзЗржи YML ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐?

| Reason         | Benefit               |
| -------------- | --------------------- |
| No code change | Production safe       |
| Ops friendly   | DevOps edit ржХрж░рждрзЗ ржкрж╛рж░рзЗ |
| Dynamic        | Profile-based config  |
| Clean          | Less Java boilerplate |

---

## ЁЯзк Run-time Behaviour

* App start рж╣рж▓рзЗ YML load рж╣рзЯ
* JVM memory рждрзЗ route ржерж╛ржХрзЗ
* YML ржлрж╛ржЗрж▓ ржЖрж░ run рж╣рзЯ ржирж╛
* Request тЖТ Java engine

---

## ЁЯза One-line Truth

> **YML ржХржЦржирзЛ run рж╣рзЯ ржирж╛ тАФ Spring Boot run рж╣рзЯ, ржЖрж░ YML рж╣рж▓рзЛ рждрж╛рж░ configuration brain ЁЯза**

---

ржЪрж╛ржУ рждрзЛ ржЖржорж┐ ржкрж░рзЗрж░ ржзрж╛ржкрзЗ ржжрзЗржЦрж╛рждрзЗ ржкрж╛рж░рж┐:

* ЁЯФ╣ YML тЖТ Java object mapping trace
* ЁЯФ╣ Live route reload (without restart)
* ЁЯФ╣ Config Server ржжрж┐рзЯрзЗ dynamic YML
* ЁЯФ╣ Gateway debugging (route hit or not)

ржмрж▓рж▓рзЗржЗ ржкрж░рзЗрж░ рж▓рзЗрзЯрж╛рж░ ржЦрзБрж▓рзЗ ржжрж┐ржЗ ЁЯЪА
