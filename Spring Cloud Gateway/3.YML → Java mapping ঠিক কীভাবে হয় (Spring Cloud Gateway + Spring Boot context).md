à¦à¦–à¦¨ à¦†à¦¸à¦² **core mechanics** à¦¬à§‹à¦à¦¾à¦‡ ğŸ”¥
ğŸ‘‰ **YML â†’ Java mapping à¦ à¦¿à¦• à¦•à§€à¦­à¦¾à¦¬à§‡ à¦¹à§Ÿ** (Spring Cloud Gateway + Spring Boot context)

---

## ğŸ§  Big Picture (One Look)

```
application.yml
   â†“
Spring Environment
   â†“
@ConfigurationProperties / AutoConfig
   â†“
Java Objects (POJO)
   â†“
Gateway Engine uses them
```

ğŸ‘‰ YML **à¦¡à¦¾à¦Ÿà¦¾**, Java **à¦²à¦œà¦¿à¦•**

---

## 1ï¸âƒ£ Spring Boot YML à¦ªà§œà¦¾ à¦¶à§à¦°à§ à¦•à¦°à§‡ à¦•à§€à¦­à¦¾à¦¬à§‡?

App start à¦¹à¦²à§‡ à¦à¦‡ flow à¦¹à§Ÿ:

```
main()
 â†“
SpringApplication.run()
 â†“
ConfigDataEnvironmentPostProcessor
 â†“
YamlPropertySourceLoader
 â†“
Environment (key-value map)
```

Example:

```yaml
spring.cloud.gateway.routes[0].id=user-service
```

ğŸ‘‰ à¦à¦Ÿà¦¾ internally à¦¹à§Ÿà§‡ à¦¯à¦¾à§Ÿ:

```text
key = "spring.cloud.gateway.routes[0].id"
value = "user-service"
```

---

## 2ï¸âƒ£ YML â†’ Java Mapping à¦•à§‡ à¦•à¦°à§‡?

### ğŸ‘‰ `@ConfigurationProperties`

Spring Cloud Gateway-à¦à¦° à¦­à§‡à¦¤à¦°à§‡ à¦†à¦—à§‡ à¦¥à§‡à¦•à§‡à¦‡ à¦à¦‡ class à¦†à¦›à§‡:

```java
@ConfigurationProperties("spring.cloud.gateway")
public class GatewayProperties {
    private List<RouteDefinition> routes;
}
```

### RouteDefinition class (simplified)

```java
public class RouteDefinition {
    private String id;
    private URI uri;
    private List<PredicateDefinition> predicates;
    private List<FilterDefinition> filters;
}
```

ğŸ‘‰ Spring **automatically** bind à¦•à¦°à§‡:

```yaml
spring:
  cloud:
    gateway:
      routes:
        - id: user-service
          uri: lb://USER-SERVICE
```

â¡ï¸ becomes ğŸ‘‡

```java
GatewayProperties.routes.get(0).getId();   // user-service
GatewayProperties.routes.get(0).getUri();  // lb://USER-SERVICE
```

---

## 3ï¸âƒ£ Mapping Rule (Golden Rule ğŸª„)

### YML key â†” Java field

| YML                           | Java                        |
| ----------------------------- | --------------------------- |
| `spring.cloud.gateway.routes` | `List<RouteDefinition>`     |
| `id`                          | `String id`                 |
| `uri`                         | `URI uri`                   |
| `predicates`                  | `List<PredicateDefinition>` |
| `filters`                     | `List<FilterDefinition>`    |

âœ”ï¸ Name match
âœ”ï¸ Nested structure match
âœ”ï¸ List (`-`) â†’ Java `List<>`

---

## 4ï¸âƒ£ Predicate & Filter Mapping à¦•à§€à¦­à¦¾à¦¬à§‡ à¦¹à§Ÿ?

### YML

```yaml
predicates:
  - Path=/api/users/**
```

### Java object

```java
PredicateDefinition {
   name = "Path"
   args = { "pattern" : "/api/users/**" }
}
```

Spring internally parses:

```
Path=/api/users/** 
â†’ name=Path
â†’ args map
```

Same for filters:

```yaml
filters:
  - AddRequestHeader=X-From,Gateway
```

---

## 5ï¸âƒ£ Gateway Engine à¦à¦—à§à¦²à§‹ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§‡ à¦•à¦–à¦¨?

```
Gateway startup
 â†“
RouteDefinitionLocator loads definitions
 â†“
RouteLocator converts to Route objects
 â†“
Netty server starts
```

Request à¦†à¦¸à¦²à§‡:

```
Request
 â†“
Predicate match (Java)
 â†“
Filter chain execute (Java)
 â†“
Proxy forward (Java)
```

ğŸ‘‰ YML à¦¤à¦–à¦¨ à¦†à¦° touch à¦¹à§Ÿ à¦¨à¦¾

---

## 6ï¸âƒ£ Custom YML â†’ Custom Java Mapping (Your Own)

### application.yml

```yaml
security:
  jwt:
    secret: my-secret
    expiry: 3600
```

### Java

```java
@ConfigurationProperties(prefix = "security.jwt")
@Component
public class JwtConfig {
    private String secret;
    private int expiry;
}
```

Spring à¦¨à¦¿à¦œà§‡ bind à¦•à¦°à¦¬à§‡ âœ”ï¸

---

## 7ï¸âƒ£ YML Change à¦•à¦°à¦²à§‡ à¦•à§€ à¦¹à§Ÿ?

| Case                    | Result          |
| ----------------------- | --------------- |
| Restart app             | New mapping     |
| Config Server + refresh | Live update     |
| No restart              | Old values stay |

---

## ğŸ§  Ultra-simple analogy

* **YML** = Form fill-up ğŸ“
* **Spring Binder** = Data entry officer
* **Java Object** = Record file ğŸ“
* **Gateway Engine** = Worker using the file

---

## âœ… Final Truth (Exam / Interview Line)

> **Spring Boot uses `@ConfigurationProperties` and Binder to convert YML into strongly-typed Java objects at startup.**

---

à¦šà¦¾à¦“ à¦¤à§‹ next step à¦ à¦†à¦®à¦¿ à¦¦à§‡à¦–à¦¾à¦¤à§‡ à¦ªà¦¾à¦°à¦¿:

* ğŸ”¹ Live demo: YML â†’ Java object debug
* ğŸ”¹ Why some YML doesnâ€™t bind (common mistakes)
* ğŸ”¹ `@Value` vs `@ConfigurationProperties`
* ğŸ”¹ Config Server + dynamic gateway routes

à¦¬à¦²à¦²à§‡à¦‡ à¦ªà¦°à§‡à¦° à¦²à§‡à¦­à§‡à¦² ğŸš€
