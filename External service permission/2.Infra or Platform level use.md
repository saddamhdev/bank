ржЪрж▓рзЛ ржПржЦржи ржкрж░рж┐рж╖рзНржХрж╛рж░ржнрж╛ржмрзЗ ржжрзЗржЦрж┐ ЁЯСЗ
**Infra / Platform level use** ржП ржПржЗ `serviceDefinitions/*.json` ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ тАФ ржпржЦржи App ржирж┐ржЬрзЗ ржПржЧрзБрж▓рзЛ ржкрзЬрзЗ ржирж╛ред

---

# ЁЯФе Core Idea

ржПржЗ JSON ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ **Application code use ржХрж░рзЗ ржирж╛**
ЁЯСЙ ржПржЧрзБрж▓рзЛ use ржХрж░рзЗ **Platform / Deployment Engine**

ржорж╛ржирзЗ:

```
Developer тЖТ Git Repo тЖТ CI/CD тЖТ Platform Engine тЖТ Kubernetes / Firewall / Service Mesh
```

---

# ЁЯза End-to-End Flow (Enterprise Setup)

ржзрж░рзЛ рждрзЛржорж╛рж░ repo structure:

```
assisted-experience-services/
 тФФтФАтФА create/
     тФФтФАтФА dev/
         тФФтФАтФА serviceDefinitions/
             тФЬтФАтФА assisted-origination-api-gateway-ext-dependency.json
             тФЬтФАтФА analytics-ip-whitelist.json
             тФФтФАтФА qt-tracing-whitelist.json
```

### Step 1я╕ПтГг Developer Git ржП commit ржХрж░рзЗ

рждрзБржорж┐ JSON change ржХрж░рж▓рзЗ:

```
whitelist ржирждрзБржи IP add ржХрж░рж▓рж╛
```

---

### Step 2я╕ПтГг CI/CD Pipeline Trigger рж╣рзЯ

Pipeline:

* repo clone ржХрж░рзЗ
* `create/dev/serviceDefinitions` scan ржХрж░рзЗ
* ржПржЗ JSON ржЧрзБрж▓рзЛ parse ржХрж░рзЗ

---

### Step 3я╕ПтГг Platform ржПржЧрзБрж▓рзЛ convert ржХрж░рзЗ

Platform engine (Photon / GAIA / Custom infra tool) convert ржХрж░рзЗ:

| JSON Type         | Converted To                      |
| ----------------- | --------------------------------- |
| ext-dependency    | Kubernetes NetworkPolicy (egress) |
| ip-whitelist      | Firewall rule                     |
| tracing-whitelist | Service Mesh allow rule           |
| certs json        | Secret / TLS mount                |

---

# ЁЯУж Example: ext-dependency.json тЖТ Kubernetes NetworkPolicy

рждрзЛржорж╛рж░ JSON:

```json
{
  "destinations": [
    {
      "address": "169.117.3.244",
      "protocol": "tcp",
      "portStart": 443,
      "portEnd": 443
    }
  ]
}
```

Platform ржПржЯрж╛ convert ржХрж░рзЗ ржПржЗрж░ржХржо policy ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░рзЗ:

```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
spec:
  policyTypes:
    - Egress
  egress:
    - to:
        - ipBlock:
            cidr: 169.117.3.244/32
      ports:
        - protocol: TCP
          port: 443
```

ЁЯСЙ ржПржЦржи Pod рж╢рзБржзрзБ ржУржЗ IP рждрзЗржЗ connect ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

---

# ЁЯФР ржХрзЗржи ржПржЗржнрж╛ржмрзЗ ржХрж░рж╛ рж╣рзЯ?

Enterprise / Banking / Regulated environment ржП:

* Default outbound blocked ржерж╛ржХрзЗ
* Zero Trust networking
* PCI DSS compliance
* Audit requirement

App ржирж┐ржЬрзЗ control ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛
Infra enforce ржХрж░рзЗред

---

# ЁЯМР Service Mesh Scenario (Istio / Envoy)

JSON тЖТ Envoy egress rule

```
ALLOW тЖТ 169.117.3.244:443
DENY тЖТ everything else
```

App ржмрзБржЭржмрзЗржУ ржирж╛ред

---

# ЁЯЪА Photon / GAIA Style Platform

рждрзБржорж┐ ржЖржЧрзЗ Photon ржирж┐рзЯрзЗ ржкрзНрж░рж╢рзНржи ржХрж░рзЗржЫрж┐рж▓рзЗ тАФ ржПржЗ pattern ржУржЦрж╛ржирзЗржЗ commonред

Platform:

* environment aware (dev / qa / prod)
* file path ржжрзЗржЦрзЗ environment detect ржХрж░рзЗ
* config-as-code policy ржмрж╛ржирж╛рзЯ
* deployment time ржП apply ржХрж░рзЗ

---

# ЁЯПж Banking Example

Gateway external call ржХрж░ржмрзЗ:

* Credit Bureau
* Fraud API
* OTP Provider
* Splunk HEC
* Dynatrace endpoint

рж╕ржм whitelist ржирж╛ ржерж╛ржХрж▓рзЗ:

```
java.net.ConnectException
timeout
503
```

---

# ЁЯзй Important Concept

Infra level JSON ржорж╛ржирзЗ:

тЬФ App bean ржирж╛
тЬФ No @ConfigurationProperties
тЬФ No Spring Bean
тЬФ No filter logic
тЬФ Pure deployment policy

---

# ЁЯПЧ Visual Architecture

```
            Git Repo
                тЖУ
        CI/CD Pipeline
                тЖУ
     Platform Config Parser
                тЖУ
  тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
  тФВ Kubernetes / Firewall    тФВ
  тФВ Service Mesh / Egress    тФВ
  тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                тЖУ
          Running Pod
```

---

# ЁЯза Difference: App-Level vs Infra-Level

| Aspect                | App-Level   | Infra-Level     |
| --------------------- | ----------- | --------------- |
| ржХрзЗ ржкрзЬрзЗ?               | Spring Boot | Platform Engine |
| Bean рж╣рзЯ?              | рж╣рзНржпрж╛ржБ       | ржирж╛              |
| Filter logic?         | рж╣рзНржпрж╛ржБ       | ржирж╛              |
| Security enforcement? | Logical     | Network         |

---

# ЁЯОп Final Summary

рждрзБржорж┐ ржпрзЗ project proxy ржжрзЗржЦрж╛ржЪрзНржЫрзЛ:

ржПржЗ JSON ржЧрзБрж▓рзЛ:

тЬФ CI/CD ржжрзНржмрж╛рж░рж╛ read рж╣рзЯ
тЬФ Kubernetes egress policy ржмрж╛ржирж╛рзЯ
тЬФ Firewall rule рждрзИрж░рж┐ ржХрж░рзЗ
тЬФ Service mesh allow list ржмрж╛ржирж╛рзЯ
тЬФ Compliance enforce ржХрж░рзЗ

App runtime ржП ржХрзЛржи bean рж╣рж┐рж╕рзЗржмрзЗ store рж╣рзЯ ржирж╛ред

---

ржЪрж╛ржУ ржЖржорж┐ ржПржЦржи ржжрзЗржЦрж╛ржЗ:

* Kubernetes cluster ржП real life ржП ржПржЯрж╛ ржХрзАржнрж╛ржмрзЗ apply рж╣рзЯ
* Banking infra diagram
* Photon internally ржХрж┐ржнрж╛ржмрзЗ parse ржХрж░рзЗ
* Zero Trust model explain ржХрж░рж┐

рждрзБржорж┐ ржХрзЛржи level ржкрж░рзНржпржирзНржд deep ржпрзЗрждрзЗ ржЪрж╛ржУ?
