ржПржЗ `autoscale/` folder ржЖрж╕рж▓рзЗ **Infrastructure-level autoscaling configuration** рж░рж╛ржЦрзЗред
ржорж╛ржирзЗ тАФ ржПржЯрж╛ application code ржирж╛, ржПржЯрж╛ ржмрж▓рзЗ ржжрзЗрзЯ **platform ржХрж┐ржнрж╛ржмрзЗ pod/service scale ржХрж░ржмрзЗ**ред

---

# ЁЯУБ Folder Overview

```
assisted-experience/
 тФФтФАтФА autoscale/
     тФЬтФАтФА autoscale.json
     тФЬтФАтФА autoscale_scheduled.json
     тФФтФАтФА autoscale_test.json
```

---

# ЁЯФ╣ 1я╕ПтГг autoscale.json (Main Dynamic Scaling Rule)

рждрзБржорж┐ ржпрзЗ file ржЦрзБрж▓рзЗржЫрзЛ, рж╕рзЗржЦрж╛ржирзЗ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ:

```json
{
  "min_instances": 2,
  "max_instances": 4,
  "enabled": true,
  "relationships": {
    "rules": [
      {
        "enabled": true,
        "type": "memory",
        "min_threshold": 60,
        "max_threshold": 75
      },
      {
        "enabled": true,
        "type": "http_throughput",
        "min_threshold": 20,
        "max_threshold": 40
      },
      {
        "enabled": true,
        "type": "http_latency",
        "min_threshold": 250,
        "max_threshold": 900,
        "sub_type": "avg_95th"
      }
    ]
  }
}
```

---

# ЁЯФе ржПржЯрж╛ ржХрзА ржХрж░ржЫрзЗ?

ржПржЯрж╛ basically ржмрж▓рзЗ ржжрж┐ржЪрзНржЫрзЗ:

> Service ржХрждржЧрзБрж▓рзЛ instance ржЪрж▓ржмрзЗ ржПржмржВ ржХрзЛржи condition ржП scale up/down ржХрж░ржмрзЗред

---

# ЁЯза Field by Field Explanation

### тЬЕ `min_instances: 2`

рж╕ржмрж╕ржорзЯ ржХржоржкржХрзНрж╖рзЗ рзиржЯрж╛ pod ржерж╛ржХржмрзЗред

### тЬЕ `max_instances: 4`

рж╕рж░рзНржмрзЛржЪрзНржЪ рзкржЯрж╛ ржкрж░рзНржпржирзНржд scale ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

---

### ЁЯУК Rule 1: Memory

```json
"type": "memory",
"min_threshold": 60,
"max_threshold": 75
```

ржорж╛ржирзЗ:

* Memory usage 75% ржЫрж╛рзЬрж╛рж▓рзЗ тЖТ scale up
* 60% ржирж┐ржЪрзЗ ржирж╛ржорж▓рзЗ тЖТ scale down

---

### ЁЯМР Rule 2: HTTP Throughput

```json
"type": "http_throughput"
```

ржорж╛ржирзЗ:

* Request per second ржмрзЗрж╢рж┐ рж╣рж▓рзЗ тЖТ scale up
* ржХржо рж╣рж▓рзЗ тЖТ scale down

---

### тП▒ Rule 3: HTTP Latency

```json
"type": "http_latency",
"sub_type": "avg_95th"
```

ржорж╛ржирзЗ:

* 95th percentile latency 900ms ржЫрж╛рзЬрж╛рж▓рзЗ тЖТ scale up
* 250ms ржирж┐ржЪрзЗ ржПрж▓рзЗ тЖТ scale down

---

# ЁЯПЧ ржПржЯрж╛ ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

ржПржЗ JSON рж╕рж╛ржзрж╛рж░ржгржд convert рж╣рзЯ:

* Kubernetes HPA (Horizontal Pod Autoscaler)
* Cloud autoscaling group
* Service mesh metric-based scaling

---

# ЁЯзй Kubernetes Example Equivalent

Platform ржПржЯрж╛ convert ржХрж░рждрзЗ ржкрж╛рж░рзЗ:

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
spec:
  minReplicas: 2
  maxReplicas: 4
  metrics:
    - type: Resource
      resource:
        name: memory
        target:
          averageUtilization: 75
```

---

# ЁЯФ╣ 2я╕ПтГг autoscale_scheduled.json

ржПржЯрж╛ time-based scaling ржПрж░ ржЬржирзНржпред

Example:

* Office hour ржП min 4
* Night ржП min 1

ржорж╛ржирзЗ scheduled scalingред

---

# ЁЯФ╣ 3я╕ПтГг autoscale_test.json

Testing environment scaling configред

Dev/QA environment ржП ржЖрж▓рж╛ржжрж╛ scaling rule ржерж╛ржХрзЗред

---

# ЁЯОп ржПржЯрж╛ Application ржирж╛ Infra?

| Layer      | ржХрзЗ ржкрзЬрзЗ?    |
| ---------- | ---------- |
| App        | тЭМ ржирж╛       |
| Platform   | тЬЕ рж╣рзНржпрж╛ржБ    |
| Kubernetes | indirectly |

---

# ЁЯПж Real Banking Scenario

ржпржжрж┐:

* High load ржЖрж╕рзЗ
* Campaign run рж╣рзЯ
* Salary day traffic spike рж╣рзЯ

ржПржЗ autoscale rule pod ржмрж╛рзЬрж┐рзЯрзЗ ржжрзЗрзЯред

---

# ЁЯУК Simple Visual

```
Traffic тЖС
   тЖУ
Metrics Engine (Prometheus / Dynatrace)
   тЖУ
Platform Autoscale Controller
   тЖУ
Scale Pods 2 тЖТ 3 тЖТ 4
```

---

# ЁЯФе Summary

ржПржЗ folder ржПрж░ ржХрж╛ржЬ:

тЬФ Service ржХрждржЧрзБрж▓рзЛ instance ржЪрж▓ржмрзЗ define ржХрж░рж╛
тЬФ ржХрзЛржи metric ржП scale рж╣ржмрзЗ define ржХрж░рж╛
тЬФ Memory / Throughput / Latency ржнрж┐рждрзНрждрж┐ржХ scaling
тЬФ Dev / Prod / Test ржЖрж▓рж╛ржжрж╛ config
тЬФ Infrastructure as Code autoscaling

---

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ ржПржЦржи explain ржХрж░рждрзЗ ржкрж╛рж░рж┐:

* ржПржЯрж╛ Kubernetes HPA ржПрж░ рж╕рж╛ржерзЗ exact mapping
* Dynatrace metric-based autoscaling ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ
* Real production autoscale tuning strategy
* Banking system ржП scaling best practice

рждрзБржорж┐ ржХрзЛржиржЯрж╛ ржЬрж╛ржирждрзЗ ржЪрж╛ржУ?
