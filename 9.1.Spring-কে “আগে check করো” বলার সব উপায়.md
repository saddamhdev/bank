ржЦрзБржм ржнрж╛рж▓рзЛ ржкрзНрж░рж╢рзНржи ЁЯСН
рждрзБржорж┐ ржЬрж╛ржирждрзЗ ржЪрж╛ржУтАФ

> **тАЬSpring-ржХрзЗ ржХрзА ржХрзА ржнрж╛ржмрзЗ ржмрж▓рж╛ ржпрж╛рзЯ тАФ controller ржмрж╛ business logic-ржПрж░ ржЖржЧрзЗржЗ ржПржЯрж╛ ржЖржЧрзЗ check ржХрж░рзЛ?тАЭ**

ржПрж░ ржЙрждрзНрждрж░ржЯрж╛ ржЖрж╕рж▓рзЗ **Spring-ржПрж░ design philosophy**ред
ржЪрж▓рзЛ **simple list + ржЙржжрж╛рж╣рж░ржг** ржжрж┐рзЯрзЗ ржмрзБржЭрж┐ред

---

# ЁЯза Spring-ржХрзЗ тАЬржЖржЧрзЗ check ржХрж░рзЛтАЭ ржмрж▓рж╛рж░ рж╕ржм ржЙржкрж╛рзЯ

Spring-ржП **рзкржЯрж╛ main ржЙржкрж╛рзЯ** ржЖржЫрзЗ ржпрзЗржЧрзБрж▓рзЛ ржжрж┐рзЯрзЗ рждрзБржорж┐ ржмрж▓рзЛ
ЁЯСЙ *тАЬржПржЗ ржХрж╛ржЬржЯрж╛ ржЖржЧрзЗ ржХрж░рзЛтАЭ*

```
HTTP Request
 тЖТ (1) Filter
 тЖТ (2) Interceptor
 тЖТ (3) Security (AuthZ/AuthN)
 тЖТ (4) AOP (Method level)
 тЖТ Controller
```

---

## 1я╕ПтГг **Servlet Filter** (рж╕ржмржЪрзЗрзЯрзЗ ржЖржЧрзЗ)

### ЁЯУН ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗ?

* Security
* Logging
* Header check
* Request modify

### ЁЯУН Spring-ржХрзЗ ржХрзАржнрж╛ржмрзЗ ржмрж▓рзЛ?

Filter register ржХрж░рж▓рзЗржЗ Spring **ржирж┐ржЬрзЗ ржирж┐ржЬрзЗ ржЖржЧрзЗ ржЪрж╛рж▓рж╛рзЯ**ред

```java
@Component
public class MyFilter implements Filter {

    @Override
    public void doFilter(
        ServletRequest request,
        ServletResponse response,
        FilterChain chain) {

        // ЁЯФН BEFORE controller
        System.out.println("Filter executed");

        chain.doFilter(request, response);
    }
}
```

ЁЯСЙ Controller ржХржЦржирзЛ call рж╣рзЯ ржирж╛ ржпржжрж┐ ржПржЦрж╛ржирзЗ block ржХрж░рзЛред

### ЁЯПж Banking use

* JWT check
* IP block
* Device detect

---

## 2я╕ПтГг **Spring Security** (рж╕ржмржЪрзЗрзЯрзЗ powerful)

ЁЯСЙ ржПржЯрж╛ ржЖрж╕рж▓рзЗ **filter-ржПрж░ ржЙржкрж░ built**ред

### ЁЯУН Spring-ржХрзЗ ржХрзАржнрж╛ржмрзЗ ржмрж▓рзЛ?

Security config ржжрж┐рзЯрзЗржЗ:

```java
http
  .authorizeHttpRequests(auth -> auth
      .requestMatchers("/auth/login").permitAll()
      .anyRequest().authenticated()
  );
```

### Runtime-ржП ржХрзА рж╣рзЯ?

* Request ржЖрж╕рж▓рзЗржЗ Spring Security **ржЖржЧрзЗ check ржХрж░рзЗ**
* Fail рж╣рж▓рзЗ тЖТ 401 / 403
* Controller call рж╣рзЯ ржирж╛

ЁЯСЙ Developer method call ржХрж░рзЗ ржирж╛ред

### ЁЯПж Banking use

* Login required
* Role based access
* Token validation

---

## 3я╕ПтГг **HandlerInterceptor** (Controller-ржПрж░ ржарж┐ржХ ржЖржЧрзЗ)

### ЁЯУН ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗ?

* Request metadata check
* Custom validation
* Simple rules

```java
public class MyInterceptor implements HandlerInterceptor {

    @Override
    public boolean preHandle(
        HttpServletRequest request,
        HttpServletResponse response,
        Object handler) {

        // ЁЯФН BEFORE controller
        System.out.println("Interceptor executed");

        return true; // false рж╣рж▓рзЗ controller call рж╣ржмрзЗ ржирж╛
    }
}
```

Register ржХрж░рждрзЗ рж╣рзЯ:

```java
registry.addInterceptor(new MyInterceptor());
```

### ЁЯПж Banking use

* Channel validation
* Request header validation

---

## 4я╕ПтГг **Method-level Security (AOP)**

ЁЯСЙ Controller / Service method call-ржПрж░ ржЖржЧрзЗржЗ check

### ЁЯУН Spring-ржХрзЗ ржХрзАржнрж╛ржмрзЗ ржмрж▓рзЛ?

Annotation ржжрж┐рзЯрзЗ:

```java
@PreAuthorize("hasRole('ADMIN')")
@GetMapping("/accounts")
public List<Account> getAccounts() { }
```

### Runtime-ржП ржХрзА рж╣рзЯ?

* Spring proxy method call intercept ржХрж░рзЗ
* Role match ржирж╛ рж╣рж▓рзЗ тЖТ method call-ржЗ рж╣рзЯ ржирж╛

### ЁЯПж Banking use

* Admin-only APIs
* Teller vs Customer rules

---

## 5я╕ПтГг рждрзБрж▓ржирж╛ (ржЦрзБржм ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг)

| Method              | Controller-ржПрж░ ржХржд ржЖржЧрзЗ  | Use case           |
| ------------------- | --------------------- | ------------------ |
| Filter              | рж╕ржмржЪрзЗрзЯрзЗ ржЖржЧрзЗ            | Security, logging  |
| Spring Security     | Filter level          | Auth + Role        |
| Interceptor         | Controller-ржПрж░ ржарж┐ржХ ржЖржЧрзЗ | Custom checks      |
| AOP / @PreAuthorize | Method call-ржПрж░ ржЖржЧрзЗ    | Fine-grained rules |

---

## ЁЯза Bank-style Golden Rule ЁЯПж

> ЁЯФР **Security check тЖТ Filter / Spring Security**
> ЁЯУЛ **Business rule тЖТ Service / AOP**
> тЭМ **Controller-ржП security рж▓рж┐ржЦржмрзЗ ржирж╛**

---

## ЁЯОд Interview-ржП ржмрж▓рж╛рж░ ржорждрзЛ ржПржХ рж▓рж╛ржЗржи

> тАЬSpring allows pre-processing checks using filters, security filter chains, interceptors, and method-level AOP, ensuring validation happens before controller execution.тАЭ

---

## ЁЯФЬ ржПржЦржи рждрзБржорж┐ ржХрзА рж╢рж┐ржЦрждрзЗ ржЪрж╛ржУ?

1я╕ПтГг Filter vs Interceptor deep difference
2я╕ПтГг Spring Security internally filter ржХрж┐ржнрж╛ржмрзЗ ржмрж╛ржирж╛рзЯ
3я╕ПтГг Bank-style security config example
4я╕ПтГг Common mistakes (controller-ржП security рж▓рзЗржЦрж╛)
5я╕ПтГг Diagram ржП ржкрзБрж░рзЛ flow

ЁЯСЙ рж╢рзБржзрзБ ржирж╛ржорзНржмрж╛рж░ ржмрж▓рзЛ ЁЯСН
