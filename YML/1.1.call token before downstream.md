ржУржХрзЗ ЁЯФе ржПржЦржи ржкрж░рж┐рж╖рзНржХрж╛рж░ тАФ
**ржПржЯрж╛ API Gateway ржПрж░ configред**

рждрж╛рж╣рж▓рзЗ ржмрж┐рж╖рзЯржЯрж╛ ржПржХржЯрзБ ржмржжрж▓рзЗ ржпрж╛рзЯред

---

# ЁЯза Gateway рж╣рж▓рзЗ ржПржЯрж╛ ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

рждрзЛржорж╛рж░ architecture ржзрж░рзЛ ржПржоржи:

```
Client (React / Postman)
        тЖУ
   API Gateway
        тЖУ
   App-Capture Service
```

ржПржЦржи ржкрзНрж░рж╢рзНржи:

ЁЯСЙ Gateway ржХрзЗржи OAuth2 config рж░рж╛ржЦржЫрзЗ?

---

# ЁЯОп ржХрж╛рж░ржг рзз: Gateway downstream call ржХрж░рж╛рж░ ржЖржЧрзЗ token ржирзЗржмрзЗ

ржорж╛ржирзЗ:

Gateway ржирж┐ржЬрзЗржЗ App-Capture рж╕рж╛рж░рзНржнрж┐рж╕рзЗ call ржХрж░ржЫрзЗ
Client ржирж╛ред

Flow рж╣ржмрзЗ:

```
Client тЖТ Gateway
Gateway тЖТ Token Server (ADFS)
Gateway тЖТ App-Capture (Bearer Token рж╕рж╣)
```

---

# ЁЯФе Runtime Flow (Gateway Version)

## Step 1я╕ПтГг Client request ржжрзЗрзЯ

```
GET /capture/data
```

Gateway receive ржХрж░рзЗред

---

## Step 2я╕ПтГг Gateway ржжрзЗржЦрзЗ:

```yaml
oauth2:
  enabled: true
```

ржорж╛ржирзЗ downstream call ржХрж░рж╛рж░ ржЖржЧрзЗ token рж▓рж╛ржЧржмрзЗред

---

## Step 3я╕ПтГг Gateway token ржирзЗрзЯ

```yaml
access-token-uri:
```

ржПржЦрж╛ржирзЗ POST ржХрж░рзЗред

---

## Step 4я╕ПтГг Gateway downstream call ржХрж░рзЗ

```
Authorization: Bearer <token>
```

---

# тЭЧ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЬрж┐ржирж┐рж╕

ржПржЯрж╛ **Client authentication ржирж╛**ред

ржорж╛ржирзЗ:

тЭМ ржПржЯрж╛ user login token ржирж╛
тЬЕ ржПржЯрж╛ gateway тЖТ service authentication

---

# ЁЯФР рждрж╛рж╣рж▓рзЗ resource-uri ржХрзЗржи?

```yaml
resource-uri: JPMC:URI:RS-89893-149650-daapinewaccounts-UAT
```

Token ржПрж░ audience match ржХрж░рж╛рж░ ржЬржирзНржпред

Large banking system ржП token check ржХрж░рзЗ:

```
aud claim must match resource-uri
```

---

# ЁЯЪА Gateway ржП ржПржЯрж╛ ржХрж┐ржнрж╛ржмрзЗ implement рж╣рзЯ?

Usually 2 ways:

### тЬЕ 1я╕ПтГг Spring Cloud Gateway + WebClient filter

Custom filter token ржирж┐рзЯрзЗ header inject ржХрж░рзЗред

### тЬЕ 2я╕ПтГг Spring Security OAuth2 Client

Auto token management ржХрж░рзЗред

---

# ЁЯзй Simple Visualization

```
Client
   тЖУ
Gateway
   тЖУ (get token first)
ADFS Token Server
   тЖУ (return token)
Gateway
   тЖУ (call with Bearer)
App Capture Service
```

---

# тЪая╕П Important Banking Pattern

Banking architecture ржП:

* Gateway = Edge Security
* Internal services directly exposed ржирж╛
* Gateway service-to-service token manage ржХрж░рзЗ

---

# ЁЯОп ржПржХ рж▓рж╛ржЗржирзЗ

ЁЯСЙ ржПржЗ config Gateway ржХрзЗ рж╢рзЗржЦрж╛ржЪрзНржЫрзЗ ржХрж┐ржнрж╛ржмрзЗ ржирж┐ржЬрзЗ token ржирж┐рзЯрзЗ downstream secure API call ржХрж░рждрзЗ рж╣рзЯред

---

Saddam, рждрзБржорж┐ ржпрзЗрж╣рзЗрждрзБ Spring Cloud Gateway ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рзЛ тАФ

ржЪрж╛ржУ ржЖржорж┐ ржжрзЗржЦрж╛ржЗ:

* ЁЯФе Exact Spring Cloud Gateway config example?
* ЁЯФР Custom GlobalFilter token injection code?
* ЁЯЪА Enterprise-level secure gateway pattern?
* ЁЯза Diagram рж╕рж╣ explain?

ржпрзЗржЯрж╛ ржЪрж╛ржЗржмрзЗ, deep level ржП ржирж┐рзЯрзЗ ржпрж╛ржмред
