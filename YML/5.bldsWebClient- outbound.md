ржнрж╛рж▓рзЛ ЁЯСН ржПржЦржи ржПржЯрж╛ ржПржХржЯрж╛ **external WebClient configuration block** тАФ ржЦрзБржм enterprise-style configред

рждрзЛржорж╛рж░ YAML (readable form):

```yaml
bldsWebClient:
  url: https://branch-locator.test.gaiacloud.jpmchase.net
  uri: /ccb/shared-functions/branch-services/branch-location-details/v2/branch-locations/branches/{branch-identifier}
  connectTimeout: 3000
  readTimeout: 3000

  api-gateway-token:
    enabled: true
    authentication: cyberark.credential.local.username=B805968;password=...

  oauth2:
    resource-uri: JPMC:URI:RS-109913-64136-BranchLocatorApi-UAT
    enabled: true
    client:
      access-token-uri: https://idaaatg2.jpmorganchase.com/adfs/oauth2/token/
      client-id: PC-89893-H058440-318291-UAT
      credential: cyberark.credential.local.username=ADVH058440;password=...

  payload-logging: true
```

---

# ЁЯза ржПржЯрж╛ ржХрзА?

ЁЯСЙ Gateway ржмрж╛ Service тЖТ **Branch Locator API call ржХрж░рж╛рж░ config**

ржорж╛ржирзЗ рждрзЛржорж╛рж░ system ржмрж╛ржЗрж░рзЗ ржПржХржЯрж╛ тАЬBranch LocatorтАЭ service call ржХрж░ржЫрзЗред

---

# ЁЯФН Line by Line Explain

---

## ЁЯФ╣ url

```yaml
url: https://branch-locator.test.gaiacloud.jpmchase.net
```

Base URL of downstream API.

---

## ЁЯФ╣ uri

```yaml
/ccb/shared-functions/.../{branch-identifier}
```

Endpoint path.

`{branch-identifier}` = path variable.

Example runtime:

```
https://branch-locator.../branches/12345
```

---

## ЁЯФ╣ connectTimeout: 3000

Connection establish ржХрж░рж╛рж░ ржЬржирзНржп max 3 seconds wait ржХрж░ржмрзЗред

---

## ЁЯФ╣ readTimeout: 3000

Response ржЖрж╕рж╛рж░ ржЬржирзНржп max 3 seconds wait ржХрж░ржмрзЗред

Timeout рж╣рж▓рзЗ:

```
java.net.SocketTimeoutException
```

---

# ЁЯФР api-gateway-token block

```yaml
api-gateway-token:
  enabled: true
  authentication: cyberark...
```

ржПржЯрж╛ OAuth ржирж╛ред

ржПржЯрж╛ custom token / credential based authenticationред

ржорж╛ржирзЗ:

Gateway level basic credential ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗред

---

# ЁЯФР oauth2 block

ржПржЯрж╛ржЗ ржЖрж╕рж▓ enterprise security layerред

```yaml
oauth2:
  enabled: true
```

ржорж╛ржирзЗ:

Downstream call ржХрж░рж╛рж░ ржЖржЧрзЗ OAuth2 token ржирзЗржмрзЗред

---

## ЁЯФ╣ resource-uri

Token ржПрж░ audience match ржХрж░рж╛рж░ ржЬржирзНржпред

---

## ЁЯФ╣ access-token-uri

Token server (ADFS) endpointред

---

## ЁЯФ╣ client-id

Registered OAuth clientред

---

## ЁЯФ╣ credential

Client credential (CyberArk injected ideally).

---

# ЁЯзй Important

ржПржЦрж╛ржирзЗ ржжрзБржЗржЯрж╛ authentication layer ржЖржЫрзЗ:

| Layer             | Purpose                  |
| ----------------- | ------------------------ |
| api-gateway-token | Gateway internal auth    |
| oauth2            | Enterprise ADFS security |

---

# ЁЯФе payload-logging: true

ржорж╛ржирзЗ:

Request/Response body log ржХрж░ржмрзЗред

тЪая╕П Production banking environment ржП sensitive data leak рж╣рждрзЗ ржкрж╛рж░рзЗред

---

# ЁЯПЧ Runtime Flow (Real Architecture)

```
Gateway receives request
        тЖУ
Prepare downstream call
        тЖУ
Get OAuth2 token from ADFS
        тЖУ
Add:
  Authorization: Bearer <token>
        +
  API-Gateway token header
        тЖУ
Call Branch Locator API
        тЖУ
Return response
```

---

# ЁЯОп Enterprise Meaning

ржПржЗ config ржПржХржЯрж╛ fully secured outbound integration setup:

тЬФ Timeout controlled
тЬФ OAuth secured
тЬФ Credential managed
тЬФ Token audience specific
тЬФ Logging controlled

---

# тЪая╕П Security Note (Important)

YAML ржП password рж░рж╛ржЦрж╛ riskyред

Better:

```
credential: ${BLDS_CLIENT_SECRET}
```

Injected via:

* Vault
* CyberArk
* Kubernetes secret

---

# ЁЯФе Saddam Context

рждрзБржорж┐ ржпрзЗрж╣рзЗрждрзБ:

* Gateway
* OAuth2
* Banking style integration
* Multi downstream client manage ржХрж░ржЫрзЛ

ржПржЯрж╛ typical enterprise outbound client configред

---

# ЁЯОп One Line Summary

ЁЯСЙ ржПржЯрж╛ Gateway ржХрзЗ рж╢рзЗржЦрж╛ржЪрзНржЫрзЗ ржХрж┐ржнрж╛ржмрзЗ secure ржнрж╛ржмрзЗ Branch Locator API call ржХрж░рждрзЗ рж╣ржмрзЗред

---

ржЪрж╛ржУ ржХрж┐ ржЖржорж┐ ржПржЦржи ржжрзЗржЦрж╛ржЗ:

ЁЯФе WebClient ржжрж┐рзЯрзЗ ржПржЗ config runtime ржП ржХрж┐ржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ?
ЁЯЪА Token caching strategy?
ЁЯФР Multi-client architecture pattern?
ЁЯУК Full enterprise gateway security flow diagram?

ржмрж▓рж▓рзЗржЗ deep technical explain ржХрж░ржмрзЛ ЁЯШО
